var W=Object.defineProperty,Y=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var V=(e,t,o)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,_=(e,t)=>{for(var o in t||(t={}))Q.call(t,o)&&V(e,o,t[o]);if(D)for(var o of D(t))X.call(t,o)&&V(e,o,t[o]);return e},b=(e,t)=>Y(e,J(t));import{m as Z,u as ee,a as te,r as oe,b as se,p as ne,s as re,c as ae,d as ie,e as le,E as ce,f as v,w as i,g as u,h as ue,o as g,i as a,j as y,k as _e,l as de,n as I,t as j,F as pe,q as me,v as fe,x as ge,y as he,V as ve,z as ye,A as C,N as d,B as Ee,C as Ie,D as Te}from"./vendor.8c10c2f2.js";const Pe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function o(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=o(s);fetch(s.href,r)}};Pe();var Oe="/assets/user.9df2d023.jpg";const S="token",be=e=>new Promise(t=>{sessionStorage.setItem(S,e),t(e)}),E=()=>sessionStorage.getItem(S),Ae=()=>new Promise(e=>{sessionStorage.removeItem(S),e()}),N=[{value:1,label:"\u9879\u76EE\u7ECF\u7406",type:""},{value:2,label:"\u4EA7\u54C1\u7ECF\u7406",type:"success"},{value:3,label:"\u540E\u7AEF\u5F00\u53D1",type:"info"},{value:4,label:"\u524D\u6BB5\u5F00\u53D1",type:"warning"},{value:5,label:"\u6D4B\u8BD5\u4EBA\u5458",type:"danger"}];var Se=(e,t)=>{const o=e.__vccOpts||e;for(const[n,s]of t)o[n]=s;return o};const Le={name:"App",computed:b(_({},Z(["loading","userInfo"])),{returnUserType(){const e=N.map(({value:t})=>t);return(this.userInfo.type||[]).map(t=>{const o=e.indexOf(t);return N[o]})}}),setup(){const e=ee(),t=te();return{Reading:oe,User:se,Plus:ne,Search:re,Star:ae,CircleCheckFilled:ie,SwitchButton:le,avatar:Oe,sysTitle:"\u5F00\u53D1\u7CFB\u7EDF",handleOut:()=>{Ae(),e.dispatch("user/resetToken"),ce.success("\u9000\u51FA\u6210\u529F"),t.push("/login")}}},watch:{userInfo(e){console.log(e)}}},ke={class:"user-info"},we={class:"user-project"},Re=I(" \u5168\u90E8\u9879\u76EE "),De=I("\u8FDB\u884C\u4E2D\u9879\u76EE"),Ve=I("\u5B8C\u6210\u9879\u76EE"),je={class:"user-edit"};function Ce(e,t,o,n,s,r){const l=u("el-image"),h=u("el-tag"),m=u("el-space"),f=u("el-button"),w=u("el-tooltip"),T=u("router-link"),P=u("el-badge"),$=u("el-popconfirm"),R=u("el-card"),M=u("el-header"),q=u("router-view"),K=u("el-main"),G=u("el-container"),H=ue("loading");return g(),v(G,{class:"app"},{default:i(()=>[a(M,{class:"layout-head"},{default:i(()=>[a(R,{shadow:"always","body-style":{padding:"18px"}},{default:i(()=>[a(m,{size:"large",class:"user"},{default:i(()=>[a(l,{style:{width:"60px",height:"60px"},src:e.userInfo?e.userInfo.avatar:n.avatar,fit:"cover"},null,8,["src"]),y("div",ke,[(g(!0),_e(pe,null,de(r.returnUserType,O=>(g(),v(h,{type:O.type,key:O},{default:i(()=>[I(j(O.label),1)]),_:2},1032,["type"]))),128)),y("div",null,j(e.userInfo.name||`\u6B22\u8FCE\u8BBF\u95EE${n.sysTitle}`),1)])]),_:1}),e.userInfo.name?(g(),v(m,{key:0,size:"large",class:"user"},{default:i(()=>[y("div",we,[a(T,{class:"item",to:"/article/list"},{default:i(()=>[a(w,{content:"\u6587\u7AE0",placement:"top",effect:"light"},{default:i(()=>[a(f,{icon:n.Reading},null,8,["icon"])]),_:1})]),_:1}),a(T,{class:"item",to:"/user"},{default:i(()=>[a(w,{content:"\u7528\u6237",placement:"top",effect:"light"},{default:i(()=>[a(f,{icon:n.User},null,8,["icon"])]),_:1})]),_:1}),a(P,{value:12,class:"item"},{default:i(()=>[a(T,{to:"/project/list"},{default:i(()=>[a(f,{icon:n.Search},{default:i(()=>[Re]),_:1},8,["icon"])]),_:1})]),_:1}),a(P,{value:12,class:"item"},{default:i(()=>[a(f,{type:"primary",icon:n.Star},{default:i(()=>[De]),_:1},8,["icon"])]),_:1}),a(P,{value:12,class:"item"},{default:i(()=>[a(f,{type:"success",icon:n.CircleCheckFilled},{default:i(()=>[Ve]),_:1},8,["icon"])]),_:1})]),y("div",je,[a($,{title:"\u786E\u5B9A\u9000\u51FA\u767B\u5F55?",onConfirm:n.handleOut},{reference:i(()=>[a(f,{type:"danger",icon:n.SwitchButton},null,8,["icon"])]),_:1},8,["onConfirm"])])]),_:1})):me("",!0)]),_:1})]),_:1}),fe((g(),v(K,{class:"layout-main"},{default:i(()=>[a(R,{shadow:"always","body-style":{padding:"18px"}},{default:i(()=>[a(q)]),_:1})]),_:1})),[[H,e.loading]])]),_:1})}var Ne=Se(Le,[["render",Ce],["__scopeId","data-v-446f7f1c"]]);const ze="modulepreload",z={},Be="/",c=function(t,o){return!o||o.length===0?t():Promise.all(o.map(n=>{if(n=`${Be}${n}`,n in z)return;z[n]=!0;const s=n.endsWith(".css"),r=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${r}`))return;const l=document.createElement("link");if(l.rel=s?"stylesheet":ze,s||(l.as="script",l.crossOrigin=""),l.href=n,document.head.appendChild(l),s)return new Promise((h,m)=>{l.addEventListener("load",h),l.addEventListener("error",m)})})).then(()=>t())},Ue=[{path:"/",name:"Home",component:()=>c(()=>import("./index.876521c7.js"),["assets/index.876521c7.js","assets/index.50d602a8.css","assets/vendor.8c10c2f2.js"]),meta:{title:"\u9996\u9875"}},{path:"/login",name:"Login",component:()=>c(()=>import("./index.a0352099.js"),["assets/index.a0352099.js","assets/index.3dc5df13.css","assets/vendor.8c10c2f2.js","assets/rules.a17129b4.js","assets/detail.31e6a3a5.js"]),meta:{title:"\u767B\u5F55"}},{path:"/user",name:"User",component:()=>c(()=>import("./index.0785111f.js"),["assets/index.0785111f.js","assets/index.6330fc47.css","assets/index.fc0fd315.js","assets/index.12f70d33.css","assets/rules.a17129b4.js","assets/vendor.8c10c2f2.js","assets/detail.31e6a3a5.js","assets/search.51f3b729.js"]),meta:{title:"\u7528\u6237"}},{path:"/article",name:"Article",component:()=>c(()=>import("./index.7d33b771.js"),["assets/index.7d33b771.js","assets/vendor.8c10c2f2.js"]),meta:{title:"\u6587\u7AE0"},children:[{path:"list",name:"ArticleList",component:()=>c(()=>import("./index.610452f8.js"),["assets/index.610452f8.js","assets/index.61f25ccd.css","assets/info.a57e317b.js","assets/info.644e4267.css","assets/index.fc0fd315.js","assets/index.12f70d33.css","assets/rules.a17129b4.js","assets/vendor.8c10c2f2.js","assets/detail.31e6a3a5.js","assets/search.51f3b729.js"]),meta:{title:"\u6DFB\u52A0\u6587\u7AE0"}},{path:"add",name:"ArticleAdd",component:()=>c(()=>import("./add.fa6705a5.js"),["assets/add.fa6705a5.js","assets/info.a57e317b.js","assets/info.644e4267.css","assets/index.fc0fd315.js","assets/index.12f70d33.css","assets/rules.a17129b4.js","assets/vendor.8c10c2f2.js","assets/detail.31e6a3a5.js"]),meta:{title:"\u6DFB\u52A0\u6587\u7AE0"}},{path:"edit",name:"ArticleEdit",component:()=>c(()=>import("./edit.566bfb8f.js"),["assets/edit.566bfb8f.js","assets/info.a57e317b.js","assets/info.644e4267.css","assets/index.fc0fd315.js","assets/index.12f70d33.css","assets/rules.a17129b4.js","assets/vendor.8c10c2f2.js","assets/detail.31e6a3a5.js"]),meta:{title:"\u7F16\u8F91\u6587\u7AE0"}},{path:"see",name:"ArticleSee",component:()=>c(()=>import("./see.ae38b790.js"),["assets/see.ae38b790.js","assets/see.e7acd76b.css","assets/detail.31e6a3a5.js","assets/vendor.8c10c2f2.js"]),meta:{title:"\u67E5\u770B\u6587\u7AE0"}}]},{path:"/project",name:"Project",component:()=>c(()=>import("./index.7d33b771.js"),["assets/index.7d33b771.js","assets/vendor.8c10c2f2.js"]),meta:{title:"\u9879\u76EE"},children:[{path:"list",name:"ProjectList",component:()=>c(()=>import("./index.3de0367f.js"),["assets/index.3de0367f.js","assets/index.647245d4.css","assets/info.e2b1b71a.js","assets/info.5019eae9.css","assets/index.fc0fd315.js","assets/index.12f70d33.css","assets/rules.a17129b4.js","assets/vendor.8c10c2f2.js","assets/detail.31e6a3a5.js","assets/search.51f3b729.js"]),meta:{title:"\u6DFB\u52A0\u9879\u76EE"}},{path:"add",name:"ProjectAdd",component:()=>c(()=>import("./add.df096a8c.js"),["assets/add.df096a8c.js","assets/info.e2b1b71a.js","assets/info.5019eae9.css","assets/index.fc0fd315.js","assets/index.12f70d33.css","assets/rules.a17129b4.js","assets/vendor.8c10c2f2.js","assets/detail.31e6a3a5.js"]),meta:{title:"\u6DFB\u52A0\u9879\u76EE"}},{path:"edit",name:"ProjectEdit",component:()=>c(()=>import("./edit.119d563e.js"),["assets/edit.119d563e.js","assets/info.e2b1b71a.js","assets/info.5019eae9.css","assets/index.fc0fd315.js","assets/index.12f70d33.css","assets/rules.a17129b4.js","assets/vendor.8c10c2f2.js","assets/detail.31e6a3a5.js"]),meta:{title:"\u7F16\u8F91\u9879\u76EE"}},{path:"see",name:"ProjectSee",component:()=>c(()=>import("./see.71781a93.js"),["assets/see.71781a93.js","assets/see.7e5ff617.css","assets/detail.31e6a3a5.js","assets/vendor.8c10c2f2.js","assets/rules.a17129b4.js","assets/search.51f3b729.js","assets/index.fc0fd315.js","assets/index.12f70d33.css"]),meta:{title:"\u67E5\u770B\u9879\u76EE"}}]},{path:"/child",name:"Child",component:()=>c(()=>import("./index.fbd33b94.js"),["assets/index.fbd33b94.js","assets/vendor.8c10c2f2.js"]),meta:{title:"\u6211\u7684"},children:[{path:"profession",name:"Profession",component:()=>c(()=>import("./index.c020df9d.js"),["assets/index.c020df9d.js","assets/index.84ecc3b4.css","assets/vendor.8c10c2f2.js"]),meta:{title:"\u804C\u4E1A\u53F2"}}]}],L=ge({history:he(),routes:Ue}),Fe={loading:!1},xe={SET_LOADING:(e,t)=>{e.loading=t}},$e={setLoading({commit:e},t){e("SET_LOADING",t)}};var Me={namespaced:!0,state:Fe,mutations:xe,actions:$e},qe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Me});const A={name:"",type:"",avatar:""},Ke={token:E(),userInfo:_({},A)},Ge={SET_USER_INFO:(e,t)=>{e.userInfo=_(_({},A),t)},RESET_TOKEN:e=>{e.userInfo=_({},A),be("")}},He={getUserInfo({commit:e},t){e("SET_USER_INFO",t)},resetToken({commit:e},t){e("RESET_TOKEN")}};var We={namespaced:!0,state:Ke,mutations:Ge,actions:He},Ye=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:We});const Je={hazard:[]};var Qe={namespaced:!0,state:Je},Xe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Qe});const Ze={loading:e=>e.system.loading,token:e=>e.user.token,userInfo:e=>e.user.userInfo},B={"./modules/system.ts":qe,"./modules/user.ts":Ye,"./modules/zd.ts":Xe};let U={};for(let e in B){const t=e.replace(/.+(?=\/)|(\/)|(\.ts)/g,"");U[t]=B[e].default}const p=new ve.Store({modules:U,getters:Ze});const k=ye.create({baseURL:"/api"});k.interceptors.request.use(e=>(e.headers["Content-Type"]="application/json",p.getters.token&&(e.headers.token=`Bearer ${E()}`,e.headers.Authorization=`Bearer ${E()}`),e),e=>Promise.reject(e));k.interceptors.response.use(e=>{const t=e.data;return t.status!==200?(C({message:t.msg||"\u9519\u8BEF\u4EE3\u7801"+t.status,type:"error",showClose:!0,duration:5*1e3}),Promise.reject(t.msg||"\u9519\u8BEF\u4EE3\u7801"+t.code)):t},e=>{let t="";try{const{response:o,message:n}=e,{data:s}=o||{};t=s.message||n||(o?"\u7F51\u7EDC\u9519\u8BEF\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u3002":"\u8BF7\u6C42\u8D85\u65F6")}catch{t="\u7F51\u7EDC\u9519\u8BEF\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u3002"}return C({type:"error",message:t||"\u7F51\u7EDC\u9519\u8BEF\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u3002",showClose:!0,duration:5*1e3}),Promise.reject(e)});d.configure({showSpinner:!1});L.beforeEach(async(e,t,o)=>{d.start();const n=E();if(console.log(n),n)if(e.path==="/login")o({path:"/"}),d.done();else{const s=p.getters.userInfo.name;if(console.log(s),s)o();else try{const r=await new Promise((l,h)=>{k({url:"/userinfo",type:"get"}).then(({data:m})=>{l(m)}).catch(()=>{l()})});p.dispatch("user/getUserInfo",r),console.log(r),r?o(b(_({},e),{replace:!0})):o(),d.done()}catch{await p.dispatch("user/resetToken"),o("/login"),d.done()}}else["/login"].includes(e.path)?o():(o("/login"),d.done())});L.afterEach(()=>{d.done()});let F={loading:!1};Object.defineProperty(F,"loading",{set:function(e){p.dispatch("system/setLoading",e)},get:function(){return p.getters.loading}});const x=Ee(Ne);x.config.globalProperties.$global=F;x.use(L).use(p).use(Ie).use(Te,{size:"small",zIndex:3e3}).mount("#app");export{Se as _,be as a,F as g,k as s,N as u};
