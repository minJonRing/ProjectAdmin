import{U as T}from"./index.3bfaa252.js";import{b as C,c as k}from"./rules.a17129b4.js";import{_ as D,s as I}from"./index.b8a71ea8.js";import{u as L}from"./detail.abfae9ee.js";import{J as g,X as R,a as Y,K as j,I as y,g as s,o as _,f as U,w as a,i as t,k as B,l as F,F as M,n as h}from"./vendor.8f73d791.js";const S={name:"info",components:{Upload:T},setup(x){let o=g({name:"",developTime:[],avatar:[],fileList:[],personnel:[]});const c=g({name:C,developTime:k,personnel:k}),{handleDetail:e,submit:v}=L("/project"),b=R(),f=Y();j(()=>{i();const{id:m}=b.query;m&&e(m).then(r=>{Object.keys(r).map(u=>o[u]=r[u])})});const n=y(null),p=y([]),i=()=>{I({url:"/user",method:"get"}).then(({data:m})=>{p.value=m.list.map(({_id:r,name:d})=>({value:r,label:d})),console.log(p)})};return{personnel:p,formRef:n,form:o,rules:c,handleSubmit:m=>new Promise((r,d)=>{n.value.validate((u,l)=>{u?v(o).then(w=>{r(w),m&&f.back("/")}):(console.log("\u8868\u5355\u9A8C\u8BC1\u5931\u8D25!",l),d("\u8868\u5355\u9A8C\u8BC1\u5931\u8D25!"))})})}}},N=h("\u786E\u8BA4"),P=h(" \u8FD4\u56DE ");function q(x,o,c,e,v,b){const f=s("el-input"),n=s("el-form-item"),p=s("el-date-picker"),i=s("Upload"),V=s("el-option"),m=s("el-select"),r=s("el-button"),d=s("router-link"),u=s("el-form");return _(),U(u,{class:"project-info",ref:"formRef",model:e.form,rules:e.rules,"label-width":"120px"},{default:a(()=>[t(n,{label:"\u9879\u76EE\u540D\u79F0",prop:"name"},{default:a(()=>[t(f,{type:"textarea",rows:"3",modelValue:e.form.name,"onUpdate:modelValue":o[0]||(o[0]=l=>e.form.name=l),placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1}),t(n,{label:"\u5F00\u53D1\u65F6\u95F4",prop:"developTime"},{default:a(()=>[t(p,{modelValue:e.form.developTime,"onUpdate:modelValue":o[1]||(o[1]=l=>e.form.developTime=l),type:"daterange","range-separator":"\u81F3","start-placeholder":"\u5F00\u59CB\u65F6\u95F4","end-placeholder":"\u7ED3\u675F\u65F6\u95F4","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),t(n,{label:"\u5C01\u9762"},{default:a(()=>[t(i,{modelValue:e.form.avatar,"onUpdate:modelValue":o[2]||(o[2]=l=>e.form.avatar=l),url:"/upload/img",one:""},null,8,["modelValue"])]),_:1}),t(n,{label:"\u8D44\u6599"},{default:a(()=>[t(i,{modelValue:e.form.fileList,"onUpdate:modelValue":o[3]||(o[3]=l=>e.form.fileList=l),url:"/upload/img"},null,8,["modelValue"])]),_:1}),t(n,{label:"\u5F00\u53D1\u4EBA\u5458",prop:"personnel"},{default:a(()=>[t(m,{modelValue:e.form.personnel,"onUpdate:modelValue":o[4]||(o[4]=l=>e.form.personnel=l),placeholder:"\u8BF7\u9009\u62E9",clearable:"",filterable:"",multiple:"",style:{width:"100%"}},{default:a(()=>[(_(!0),B(M,null,F(e.personnel,l=>(_(),U(V,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(n,null,{default:a(()=>[t(r,{type:"primary",onClick:e.handleSubmit},{default:a(()=>[N]),_:1},8,["onClick"]),t(d,{class:"ml10",to:"list"},{default:a(()=>[t(r,null,{default:a(()=>[P]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])}var z=D(S,[["render",q],["__scopeId","data-v-6f9139ee"]]);export{z as I};
