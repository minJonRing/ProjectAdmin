var H=Object.defineProperty,J=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var D=(e,t,o)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,P=(e,t)=>{for(var o in t||(t={}))Y.call(t,o)&&D(e,o,t[o]);if(w)for(var o of w(t))Q.call(t,o)&&D(e,o,t[o]);return e},S=(e,t)=>J(e,W(t));import{m as X,u as Z,a as ee,r as te,b as oe,p as se,s as ne,c as re,d as ae,e as ie,E as le,f as g,w as a,g as u,h as ce,o as f,i as r,j as v,k as ue,l as _e,n as E,t as V,F as de,q as pe,v as me,x as fe,y as he,V as ge,z as ve,A as j,N as p,B as ye,C as Ee,D as Te}from"./vendor.d8f33275.js";const Ie=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function o(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=o(n);fetch(n.href,i)}};Ie();var Oe="/assets/user.9df2d023.jpg";const b="token",Pe=e=>{sessionStorage.setItem(b,e)},y=()=>sessionStorage.getItem(b),Se=()=>{sessionStorage.removeItem(b)},N=[{value:1,label:"\u9879\u76EE\u7ECF\u7406",type:""},{value:2,label:"\u4EA7\u54C1\u7ECF\u7406",type:"success"},{value:3,label:"\u540E\u7AEF\u5F00\u53D1",type:"info"},{value:4,label:"\u524D\u6BB5\u5F00\u53D1",type:"warning"},{value:5,label:"\u6D4B\u8BD5\u4EBA\u5458",type:"danger"}];var be=(e,t)=>{const o=e.__vccOpts||e;for(const[s,n]of t)o[s]=n;return o};const Ae={name:"App",computed:S(P({},X(["loading","userInfo"])),{returnUserType(){const e=N.map(({value:t})=>t);return(this.userInfo.type||[]).map(t=>{const o=e.indexOf(t);return N[o]})}}),setup(){const e=Z(),t=ee();return{Reading:te,User:oe,Plus:se,Search:ne,Star:re,CircleCheckFilled:ae,SwitchButton:ie,avatar:Oe,sysTitle:"\u5F00\u53D1\u7CFB\u7EDF",handleOut:()=>{Se(),e.dispatch("user/resetToken"),le.success("\u9000\u51FA\u6210\u529F"),t.push("/login")}}},watch:{userInfo(e){console.log(e)}}},Le={class:"user-info"},ke={class:"user-project"},Re=E(" \u5168\u90E8\u9879\u76EE "),we=E("\u8FDB\u884C\u4E2D\u9879\u76EE"),De=E("\u5B8C\u6210\u9879\u76EE"),Ve={class:"user-edit"};function je(e,t,o,s,n,i){const c=u("el-image"),m=u("el-tag"),h=u("el-space"),d=u("el-button"),k=u("el-tooltip"),T=u("router-link"),I=u("el-badge"),F=u("el-popconfirm"),R=u("el-card"),$=u("el-header"),q=u("router-view"),K=u("el-main"),M=u("el-container"),G=ce("loading");return f(),g(M,{class:"app"},{default:a(()=>[r($,{class:"layout-head"},{default:a(()=>[r(R,{shadow:"always","body-style":{padding:"18px"}},{default:a(()=>[r(h,{size:"large",class:"user"},{default:a(()=>[r(c,{style:{width:"60px",height:"60px"},src:e.userInfo?e.userInfo.avatar:s.avatar,fit:"cover"},null,8,["src"]),v("div",Le,[(f(!0),ue(de,null,_e(i.returnUserType,O=>(f(),g(m,{type:O.type,key:O},{default:a(()=>[E(V(O.label),1)]),_:2},1032,["type"]))),128)),v("div",null,V(e.userInfo.name||`\u6B22\u8FCE\u8BBF\u95EE${s.sysTitle}`),1)])]),_:1}),e.userInfo.name?(f(),g(h,{key:0,size:"large",class:"user"},{default:a(()=>[v("div",ke,[r(T,{class:"item",to:"/article/list"},{default:a(()=>[r(k,{content:"\u6587\u7AE0",placement:"top",effect:"light"},{default:a(()=>[r(d,{icon:s.Reading},null,8,["icon"])]),_:1})]),_:1}),r(T,{class:"item",to:"/user"},{default:a(()=>[r(k,{content:"\u7528\u6237",placement:"top",effect:"light"},{default:a(()=>[r(d,{icon:s.User},null,8,["icon"])]),_:1})]),_:1}),r(I,{value:12,class:"item"},{default:a(()=>[r(T,{to:"/project/list"},{default:a(()=>[r(d,{icon:s.Search},{default:a(()=>[Re]),_:1},8,["icon"])]),_:1})]),_:1}),r(I,{value:12,class:"item"},{default:a(()=>[r(d,{type:"primary",icon:s.Star},{default:a(()=>[we]),_:1},8,["icon"])]),_:1}),r(I,{value:12,class:"item"},{default:a(()=>[r(d,{type:"success",icon:s.CircleCheckFilled},{default:a(()=>[De]),_:1},8,["icon"])]),_:1})]),v("div",Ve,[r(F,{title:"\u786E\u5B9A\u9000\u51FA\u767B\u5F55?",onConfirm:s.handleOut},{reference:a(()=>[r(d,{type:"danger",icon:s.SwitchButton},null,8,["icon"])]),_:1},8,["onConfirm"])])]),_:1})):pe("",!0)]),_:1})]),_:1}),me((f(),g(K,{class:"layout-main"},{default:a(()=>[r(R,{shadow:"always","body-style":{padding:"18px"}},{default:a(()=>[r(q)]),_:1})]),_:1})),[[G,e.loading]])]),_:1})}var Ne=be(Ae,[["render",je],["__scopeId","data-v-446f7f1c"]]);const Ce="modulepreload",C={},ze="/",l=function(t,o){return!o||o.length===0?t():Promise.all(o.map(s=>{if(s=`${ze}${s}`,s in C)return;C[s]=!0;const n=s.endsWith(".css"),i=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${i}`))return;const c=document.createElement("link");if(c.rel=n?"stylesheet":Ce,n||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),n)return new Promise((m,h)=>{c.addEventListener("load",m),c.addEventListener("error",h)})})).then(()=>t())},Be=[{path:"/",name:"Home",component:()=>l(()=>import("./index.54493edb.js"),["assets/index.54493edb.js","assets/index.50d602a8.css","assets/vendor.d8f33275.js"]),meta:{title:"\u9996\u9875"}},{path:"/login",name:"Login",component:()=>l(()=>import("./index.2b14611f.js"),["assets/index.2b14611f.js","assets/index.02b2e037.css","assets/vendor.d8f33275.js","assets/rules.a17129b4.js","assets/detail.c4cf94b4.js"]),meta:{title:"\u767B\u5F55"}},{path:"/user",name:"User",component:()=>l(()=>import("./index.63651f68.js"),["assets/index.63651f68.js","assets/index.6330fc47.css","assets/index.80c0a870.js","assets/index.12f70d33.css","assets/rules.a17129b4.js","assets/vendor.d8f33275.js","assets/detail.c4cf94b4.js","assets/search.18415771.js"]),meta:{title:"\u7528\u6237"}},{path:"/article",name:"Article",component:()=>l(()=>import("./index.c070acc8.js"),["assets/index.c070acc8.js","assets/vendor.d8f33275.js"]),meta:{title:"\u6587\u7AE0"},children:[{path:"list",name:"ArticleList",component:()=>l(()=>import("./index.e9ded575.js"),["assets/index.e9ded575.js","assets/index.61f25ccd.css","assets/info.e08fac4f.js","assets/info.644e4267.css","assets/index.80c0a870.js","assets/index.12f70d33.css","assets/rules.a17129b4.js","assets/vendor.d8f33275.js","assets/detail.c4cf94b4.js","assets/search.18415771.js"]),meta:{title:"\u6DFB\u52A0\u6587\u7AE0"}},{path:"add",name:"ArticleAdd",component:()=>l(()=>import("./add.4c978348.js"),["assets/add.4c978348.js","assets/info.e08fac4f.js","assets/info.644e4267.css","assets/index.80c0a870.js","assets/index.12f70d33.css","assets/rules.a17129b4.js","assets/vendor.d8f33275.js","assets/detail.c4cf94b4.js"]),meta:{title:"\u6DFB\u52A0\u6587\u7AE0"}},{path:"edit",name:"ArticleEdit",component:()=>l(()=>import("./edit.91edca28.js"),["assets/edit.91edca28.js","assets/info.e08fac4f.js","assets/info.644e4267.css","assets/index.80c0a870.js","assets/index.12f70d33.css","assets/rules.a17129b4.js","assets/vendor.d8f33275.js","assets/detail.c4cf94b4.js"]),meta:{title:"\u7F16\u8F91\u6587\u7AE0"}},{path:"see",name:"ArticleSee",component:()=>l(()=>import("./see.7b8124ec.js"),["assets/see.7b8124ec.js","assets/see.e7acd76b.css","assets/detail.c4cf94b4.js","assets/vendor.d8f33275.js"]),meta:{title:"\u67E5\u770B\u6587\u7AE0"}}]},{path:"/project",name:"Project",component:()=>l(()=>import("./index.c070acc8.js"),["assets/index.c070acc8.js","assets/vendor.d8f33275.js"]),meta:{title:"\u9879\u76EE"},children:[{path:"list",name:"ProjectList",component:()=>l(()=>import("./index.17ee00cd.js"),["assets/index.17ee00cd.js","assets/index.647245d4.css","assets/info.7b3d7cd8.js","assets/info.5019eae9.css","assets/index.80c0a870.js","assets/index.12f70d33.css","assets/rules.a17129b4.js","assets/vendor.d8f33275.js","assets/detail.c4cf94b4.js","assets/search.18415771.js"]),meta:{title:"\u6DFB\u52A0\u9879\u76EE"}},{path:"add",name:"ProjectAdd",component:()=>l(()=>import("./add.7ed289af.js"),["assets/add.7ed289af.js","assets/info.7b3d7cd8.js","assets/info.5019eae9.css","assets/index.80c0a870.js","assets/index.12f70d33.css","assets/rules.a17129b4.js","assets/vendor.d8f33275.js","assets/detail.c4cf94b4.js"]),meta:{title:"\u6DFB\u52A0\u9879\u76EE"}},{path:"edit",name:"ProjectEdit",component:()=>l(()=>import("./edit.b8f20421.js"),["assets/edit.b8f20421.js","assets/info.7b3d7cd8.js","assets/info.5019eae9.css","assets/index.80c0a870.js","assets/index.12f70d33.css","assets/rules.a17129b4.js","assets/vendor.d8f33275.js","assets/detail.c4cf94b4.js"]),meta:{title:"\u7F16\u8F91\u9879\u76EE"}},{path:"see",name:"ProjectSee",component:()=>l(()=>import("./see.4577b7a4.js"),["assets/see.4577b7a4.js","assets/see.7e5ff617.css","assets/detail.c4cf94b4.js","assets/vendor.d8f33275.js","assets/rules.a17129b4.js","assets/search.18415771.js","assets/index.80c0a870.js","assets/index.12f70d33.css"]),meta:{title:"\u67E5\u770B\u9879\u76EE"}}]},{path:"/child",name:"Child",component:()=>l(()=>import("./index.353c0924.js"),["assets/index.353c0924.js","assets/vendor.d8f33275.js"]),meta:{title:"\u6211\u7684"},children:[{path:"profession",name:"Profession",component:()=>l(()=>import("./index.90a61705.js"),["assets/index.90a61705.js","assets/index.84ecc3b4.css","assets/vendor.d8f33275.js"]),meta:{title:"\u804C\u4E1A\u53F2"}}]}],A=fe({history:he(),routes:Be}),Ue={loading:!1},xe={SET_LOADING:(e,t)=>{e.loading=t}},Fe={setLoading({commit:e},t){e("SET_LOADING",t)}};var $e={namespaced:!0,state:Ue,mutations:xe,actions:Fe},qe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:$e});const Ke={token:y(),userInfo:{name:"",type:"",avatar:""}},Me={SET_USER_INFO:(e,t)=>{console.log(t),e.userInfo=t},RESET_TOKEN:(e,t)=>{e.userInfo={},Pe("")}},Ge={getUserInfo({commit:e},t){e("SET_USER_INFO",t)},resetToken({commit:e},t){e("RESET_TOKEN")}};var He={namespaced:!0,state:Ke,mutations:Me,actions:Ge},Je=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:He});const We={hazard:[]};var Ye={namespaced:!0,state:We},Qe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ye});const Xe={loading:e=>e.system.loading,token:e=>e.user.token,userInfo:e=>e.user.userInfo},z={"./modules/system.ts":qe,"./modules/user.ts":Je,"./modules/zd.ts":Qe};let B={};for(let e in z){const t=e.replace(/.+(?=\/)|(\/)|(\.ts)/g,"");B[t]=z[e].default}const _=new ge.Store({modules:B,getters:Xe});const L=ve.create({baseURL:"/api"});L.interceptors.request.use(e=>(e.headers["Content-Type"]="application/json",_.getters.token&&(e.headers.token=`Bearer ${y()}`,e.headers.Authorization=`Bearer ${y()}`),e),e=>Promise.reject(e));L.interceptors.response.use(e=>{const t=e.data;return t.status!==200?(j({message:t.message||"\u9519\u8BEF\u4EE3\u7801"+t.status,type:"error",showClose:!0,duration:5*1e3}),Promise.reject(t.message||"\u9519\u8BEF\u4EE3\u7801"+t.code)):t},e=>{const{response:t}=JSON.parse(JSON.stringify(e)),{data:o}=t||{},{message:s,status:n}=o;return j({type:"error",message:s||"\u7F51\u7EDC\u9519\u8BEF\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u3002",showClose:!0,duration:5*1e3}),Promise.reject(e)});p.configure({showSpinner:!1});A.beforeEach(async(e,t,o)=>{if(p.start(),y())if(e.path==="/login")o({path:"/"}),p.done();else if(_.getters.userInfo.name)o();else try{await new Promise((i,c)=>{L({url:"/userinfo",type:"get"}).then(({data:m})=>{_.dispatch("user/getUserInfo",m),i()})}),o(S(P({},e),{replace:!0}))}catch{await _.dispatch("user/resetToken"),o("/login"),p.done()}else["/login"].includes(e.path)?o():(o("/login"),p.done())});A.afterEach(()=>{p.done()});let U={loading:!1};Object.defineProperty(U,"loading",{set:function(e){_.dispatch("system/setLoading",e)},get:function(){return _.getters.loading}});const x=ye(Ne);x.config.globalProperties.$global=U;x.use(A).use(_).use(Ee).use(Te,{size:"small",zIndex:3e3}).mount("#app");export{be as _,Pe as a,U as g,L as s,N as u};
