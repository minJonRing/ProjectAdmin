var C=Object.defineProperty;var m=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var p=(t,e,a)=>e in t?C(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,h=(t,e)=>{for(var a in e||(e={}))v.call(e,a)&&p(t,a,e[a]);if(m)for(var a of m(e))z.call(e,a)&&p(t,a,e[a]);return t};import{g as i,s as f}from"./index.80bda23c.js";import{l as b}from"./detail.c4cf94b4.js";import{J as S,I as j,K as k,E as w}from"./vendor.d8f33275.js";const J=t=>{const{url:e,searchParam:a,pages:P,autoSearch:y}=h({searchParam:{},pages:{currentPage:1,pageSize:10,pageTotal:0},autoSearch:!0},t);let c=S(a),n=S(P),g=j([]);k(()=>{y&&s()});const s=()=>(i.loading=!0,new Promise((r,o)=>{f({url:e,method:"get",params:h(h({},c),n)}).then(({data:l})=>{let{list:u,total:d}=l||{};b.exports.isArray(l)?(g.value=l,d=l.length):g.value=u,n.pageTotal=d,r(l)}).finally(()=>{i.loading=!1})}));return{search:c,handleSearch:s,handleReset:()=>{Object.keys(a).map(o=>c[o]="")},table:g,pagination:n,handleCurrentChange:r=>{n.currentPage=r,s()},handleSizeChange:r=>{n.currentPage=1,n.pageSize=r,s()},handleDelete:r=>(i.loading=!0,new Promise((o,l)=>{f({url:`${e}/${r}`,method:"delete"}).then(({data:u})=>{w.success("\u6210\u529F"),s(),o(u)}).finally(()=>{i.loading=!1})}))}};export{J as u};
